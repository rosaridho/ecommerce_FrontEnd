{"ast":null,"code":"import _regeneratorRuntime from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this;\n\nimport createStore from 'unistore';\nimport axios from 'axios';\nvar initialState = {\n  pembeli_token: '',\n  pembeli_username: '',\n  pembeli_password: '',\n  pembeli_avatar: '',\n  is_login: false\n};\nvar myReqUrl = \"http://127.0.0.1:5000/pembeli/login\";\nexport var store = createStore(initialState);\nexport var actions = function actions(store) {\n  return {\n    setField: function setField(state, e) {\n      return _defineProperty({}, e.target.name, e.target.value);\n    },\n    postLogout: function postLogout(state) {\n      return {\n        is_login: false\n      };\n    },\n    postLogin: function () {\n      var _postLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(state) {\n        var data, obj, head;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = {\n                  username: state.pembeli_username,\n                  password: state.pembeli_password,\n                  token: state.pembeli_token,\n                  avatar: state.pembeli_avatar\n                };\n                obj = {\n                  pembeli_password: _this.state.pass,\n                  pembeli_username: _this.state.username\n                };\n                head = {\n                  \"Content-Type\": \"application/json\"\n                };\n                _context.next = 5;\n                return axios.post(myReqUrl, obj, head).then(function (response) {\n                  console.log(\"postLogin response\", response.data);\n                  store.setState({\n                    is_login: true // username : response.data.user_data.username,\n                    // email : response.data.user_data.email,\n                    // avatar : response.data.user_data.avatar\n\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function postLogin(_x) {\n        return _postLogin.apply(this, arguments);\n      }\n\n      return postLogin;\n    }()\n  };\n};","map":{"version":3,"sources":["/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/src/store.js"],"names":["createStore","axios","initialState","pembeli_token","pembeli_username","pembeli_password","pembeli_avatar","is_login","myReqUrl","store","actions","setField","state","e","target","name","value","postLogout","postLogin","data","username","password","token","avatar","obj","pass","head","post","then","response","console","log","setState","catch","error"],"mappings":";;;;;;AAAA,OAAOA,WAAP,MAAwB,UAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,YAAY,GAAG;AACjBC,EAAAA,aAAa,EAAC,EADG;AAEjBC,EAAAA,gBAAgB,EAAC,EAFA;AAGjBC,EAAAA,gBAAgB,EAAC,EAHA;AAIjBC,EAAAA,cAAc,EAAC,EAJE;AAKjBC,EAAAA,QAAQ,EAAG;AALM,CAArB;AAQA,IAAMC,QAAQ,GAAG,qCAAjB;AAEA,OAAO,IAAMC,KAAK,GAAGT,WAAW,CAACE,YAAD,CAAzB;AAEP,OAAO,IAAMQ,OAAO,GAAG,SAAVA,OAAU,CAAAD,KAAK;AAAA,SAAK;AAC7BE,IAAAA,QAAQ,EAAC,kBAACC,KAAD,EAAOC,CAAP,EAAa;AAClB,iCAASA,CAAC,CAACC,MAAF,CAASC,IAAlB,EAA0BF,CAAC,CAACC,MAAF,CAASE,KAAnC;AACH,KAH4B;AAK7BC,IAAAA,UAAU,EAAE,oBAAAL,KAAK,EAAG;AAChB,aAAO;AAACL,QAAAA,QAAQ,EAAG;AAAZ,OAAP;AACH,KAP4B;AAS7BW,IAAAA,SAAS;AAAA;AAAA;AAAA,+BAAG,iBAAMN,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACFO,gBAAAA,IADE,GACK;AAACC,kBAAAA,QAAQ,EAAER,KAAK,CAACR,gBAAjB;AAAmCiB,kBAAAA,QAAQ,EAAET,KAAK,CAACP,gBAAnD;AAAqEiB,kBAAAA,KAAK,EAAEV,KAAK,CAACT,aAAlF;AAAiGoB,kBAAAA,MAAM,EAACX,KAAK,CAACN;AAA9G,iBADL;AAGFkB,gBAAAA,GAHE,GAGI;AACRnB,kBAAAA,gBAAgB,EAAE,KAAI,CAACO,KAAL,CAAWa,IADrB;AAERrB,kBAAAA,gBAAgB,EAAE,KAAI,CAACQ,KAAL,CAAWQ;AAFrB,iBAHJ;AAQFM,gBAAAA,IARE,GAQK;AACT,kCAAgB;AADP,iBARL;AAAA;AAAA,uBAYFzB,KAAK,CACV0B,IADK,CACAnB,QADA,EACUgB,GADV,EACeE,IADf,EAELE,IAFK,CAEA,UAAAC,QAAQ,EAAI;AACdC,kBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,QAAQ,CAACV,IAA3C;AACIV,kBAAAA,KAAK,CAACuB,QAAN,CAAe;AACXzB,oBAAAA,QAAQ,EAAG,IADA,CAEX;AACA;AACA;;AAJW,mBAAf;AAMP,iBAVK,EAWL0B,KAXK,CAWC,UAAAC,KAAK,EAAI;AACZJ,kBAAAA,OAAO,CAACC,GAAR,CAAYG,KAAZ;AACH,iBAbK,CAZE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAToB,GAAL;AAAA,CAArB","sourcesContent":["import createStore from 'unistore';\nimport axios from 'axios';\n\nconst initialState = {\n    pembeli_token:'',\n    pembeli_username:'',\n    pembeli_password:'',\n    pembeli_avatar:'',\n    is_login : false\n}\n\nconst myReqUrl = \"http://127.0.0.1:5000/pembeli/login\";\n\nexport const store = createStore(initialState)\n\nexport const actions = store => ({\n    setField:(state,e) => {\n        return {[e.target.name] : e.target.value};\n    },\n\n    postLogout: state =>{\n        return {is_login : false};\n    },\n    \n    postLogin : async state => {\n        const data = {username: state.pembeli_username, password: state.pembeli_password, token: state.pembeli_token, avatar:state.pembeli_avatar};\n        \n        const obj = {\n            pembeli_password: this.state.pass,\n            pembeli_username: this.state.username\n          };\n\n        const head = {\n            \"Content-Type\": \"application/json\"\n          };\n      \n        await axios\n        .post(myReqUrl, obj, head)\n        .then(response => {\n            console.log(\"postLogin response\", response.data);\n                store.setState({\n                    is_login : true,\n                    // username : response.data.user_data.username,\n                    // email : response.data.user_data.email,\n                    // avatar : response.data.user_data.avatar\n                });\n        }) \n        .catch(error => {\n            console.log(error);\n        })\n    }\n});"]},"metadata":{},"sourceType":"module"}