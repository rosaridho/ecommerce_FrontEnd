{"ast":null,"code":"import _regeneratorRuntime from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _this = this;\n\nimport createStore from \"unistore\";\nimport axios from \"axios\";\nvar initialState = {\n  api_key: \"\",\n  pembeli_email: \"\",\n  pembeli_password: \"\",\n  pembeli_username: \"\",\n  pembeli_namaLengkap: \"\",\n  pembeli_gender: \"\",\n  pembeli_lokasiKota: \"\",\n  pembeli_pekerjaan: \"\",\n  is_login: false\n};\nvar myReqUrl = \"http://127.0.0.1:5000/pembeli/login\";\nvar myDataUrl = \"http://127.0.0.1:5000/pembeli/medi\";\nexport var store = createStore(initialState);\nexport var actions = function actions(store) {\n  return _defineProperty({\n    setField: function setField(state, e) {\n      return _defineProperty({}, e.target.name, e.target.value);\n    },\n    postLogout: function postLogout(state) {\n      return {\n        is_login: false\n      };\n    },\n    postLogin: function () {\n      var _postLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(state) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = {\n                  pembeli_username: state.pembeli_username,\n                  pembeli_password: state.pembeli_password\n                };\n                _context.next = 3;\n                return axios.post(myReqUrl, data).then(function (response) {\n                  console.log(\"postLogin response\", response.data);\n                  store.setState({\n                    is_login: true,\n                    api_key: response.data.Token\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function postLogin(_x) {\n        return _postLogin.apply(this, arguments);\n      }\n\n      return postLogin;\n    }()\n  }, \"postLogin\", function () {\n    var _postLogin2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(state) {\n      var data, config;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              data = {\n                pembeli_username: state.pembeli_username,\n                pembeli_password: state.pembeli_password\n              };\n              config = {\n                headers: {\n                  Authorization: \"bearer \" + _this.api_key\n                }\n              };\n              _context2.next = 4;\n              return axios.get(myDataUrl, data, config).then(function (response) {\n                console.log(response.data);\n                store.setState({\n                  pembeli_email: response.data.pembeli_email,\n                  pembeli_username: response.data.pembeli_username,\n                  pembeli_namaLengkap: response.data.pembeli_namaLengkap,\n                  pembeli_gender: response.data.pembeli_gender,\n                  pembeli_lokasiKota: response.data.pembeli_lokasiKota,\n                  pembeli_pekerjaan: response.data.pembeli_pekerjaan\n                });\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    function postLogin(_x2) {\n      return _postLogin2.apply(this, arguments);\n    }\n\n    return postLogin;\n  }());\n};","map":{"version":3,"sources":["/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/src/store.js"],"names":["createStore","axios","initialState","api_key","pembeli_email","pembeli_password","pembeli_username","pembeli_namaLengkap","pembeli_gender","pembeli_lokasiKota","pembeli_pekerjaan","is_login","myReqUrl","myDataUrl","store","actions","setField","state","e","target","name","value","postLogout","postLogin","data","post","then","response","console","log","setState","Token","catch","error","config","headers","Authorization","get"],"mappings":"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","sourcesContent":["import createStore from \"unistore\";\nimport axios from \"axios\";\n\nconst initialState = {\n  api_key: \"\",\n  pembeli_email: \"\",\n  pembeli_password: \"\",\n  pembeli_username: \"\",\n  pembeli_namaLengkap: \"\",\n  pembeli_gender: \"\",\n  pembeli_lokasiKota: \"\",\n  pembeli_pekerjaan: \"\",\n  is_login: false\n};\n\nconst myReqUrl = \"http://127.0.0.1:5000/pembeli/login\";\nconst myDataUrl = \"http://127.0.0.1:5000/pembeli/medi\";\n\nexport const store = createStore(initialState);\n\nexport const actions = store => ({\n  setField: (state, e) => {\n    return { [e.target.name]: e.target.value };\n  },\n  postLogout: state => {\n    return { is_login: false };\n  },\n  postLogin: async state => {\n    const data = {\n      pembeli_username: state.pembeli_username,\n      pembeli_password: state.pembeli_password\n    };\n\n    await axios\n      .post(myReqUrl, data)\n      .then(response => {\n        console.log(\"postLogin response\", response.data);\n        store.setState({\n          is_login: true,\n          api_key: response.data.Token\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    },\n    postLogin: async state => {\n    const data = {\n      pembeli_username: state.pembeli_username,\n      pembeli_password: state.pembeli_password\n    };\n    var config = {\n        headers: { Authorization: \"bearer \" + this.api_key }\n    }\n\n    await axios\n      .get(myDataUrl,data,config)\n      .then(response => {\n        console.log(response.data);\n        store.setState({\n          pembeli_email: response.data.pembeli_email,\n          pembeli_username: response.data.pembeli_username,\n          pembeli_namaLengkap: response.data.pembeli_namaLengkap,\n          pembeli_gender: response.data.pembeli_gender,\n          pembeli_lokasiKota: response.data.pembeli_lokasiKota,\n          pembeli_pekerjaan: response.data.pembeli_pekerjaan\n        });\n      })\n      .catch(function(error) {\n        console.log(error);\n      }); \n    }\n});\n"]},"metadata":{},"sourceType":"module"}