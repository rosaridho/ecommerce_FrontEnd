{"ast":null,"code":"import _regeneratorRuntime from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport createStore from 'unistore';\nimport axios from 'axios';\nvar initialState = {\n  pembeli_token: '',\n  pembeli_username: '',\n  pembeli_password: '',\n  pembeli_avatar: '',\n  is_login: false\n};\nexport var store = createStore(initialState);\nexport var actions = function actions(store) {\n  return {\n    setField: function setField(state, e) {\n      return _defineProperty({}, e.target.name, e.target.value);\n    },\n    postLogout: function postLogout(state) {\n      return {\n        is_login: false\n      };\n    },\n    postLogin: function () {\n      var _postLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(state) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = {\n                  username: state.pembeli_username,\n                  password: state.pembeli_password,\n                  token: state.pembeli_token,\n                  avatar: state.pembeli_avatar\n                };\n                _context.next = 3;\n                return axios.post(\"https://api-todofancy.herokuapp.com/api/auth\").then(function (response) {\n                  console.log(\"postLogin response\", response.data);\n                  store.setState({\n                    is_login: true,\n                    username: response.data.user_data.username,\n                    email: response.data.user_data.email,\n                    avatar: response.data.user_data.avatar\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function postLogin(_x) {\n        return _postLogin.apply(this, arguments);\n      }\n\n      return postLogin;\n    }()\n  };\n};","map":{"version":3,"sources":["/home/alphatech/Desktop/ecommerce_Portofolio_v2/Main_Folder/react/react_ecommerce/src/store.js"],"names":["createStore","axios","initialState","pembeli_token","pembeli_username","pembeli_password","pembeli_avatar","is_login","store","actions","setField","state","e","target","name","value","postLogout","postLogin","data","username","password","token","avatar","post","then","response","console","log","setState","user_data","email","catch","error"],"mappings":";;;AAAA,OAAOA,WAAP,MAAwB,UAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,YAAY,GAAG;AACjBC,EAAAA,aAAa,EAAC,EADG;AAEjBC,EAAAA,gBAAgB,EAAC,EAFA;AAGjBC,EAAAA,gBAAgB,EAAC,EAHA;AAIjBC,EAAAA,cAAc,EAAC,EAJE;AAKjBC,EAAAA,QAAQ,EAAG;AALM,CAArB;AASA,OAAO,IAAMC,KAAK,GAAGR,WAAW,CAACE,YAAD,CAAzB;AAEP,OAAO,IAAMO,OAAO,GAAG,SAAVA,OAAU,CAAAD,KAAK;AAAA,SAAK;AAC7BE,IAAAA,QAAQ,EAAC,kBAACC,KAAD,EAAOC,CAAP,EAAa;AAClB,iCAASA,CAAC,CAACC,MAAF,CAASC,IAAlB,EAA0BF,CAAC,CAACC,MAAF,CAASE,KAAnC;AACH,KAH4B;AAK7BC,IAAAA,UAAU,EAAE,oBAAAL,KAAK,EAAG;AAChB,aAAO;AAACJ,QAAAA,QAAQ,EAAG;AAAZ,OAAP;AACH,KAP4B;AAS7BU,IAAAA,SAAS;AAAA;AAAA;AAAA,+BAAG,iBAAMN,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACFO,gBAAAA,IADE,GACK;AAACC,kBAAAA,QAAQ,EAAER,KAAK,CAACP,gBAAjB;AAAmCgB,kBAAAA,QAAQ,EAAET,KAAK,CAACN,gBAAnD;AAAqEgB,kBAAAA,KAAK,EAAEV,KAAK,CAACR,aAAlF;AAAiGmB,kBAAAA,MAAM,EAACX,KAAK,CAACL;AAA9G,iBADL;AAAA;AAAA,uBAEFL,KAAK,CACVsB,IADK,CACA,8CADA,EAELC,IAFK,CAEA,UAAAC,QAAQ,EAAI;AACdC,kBAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,QAAQ,CAACP,IAA3C;AACIV,kBAAAA,KAAK,CAACoB,QAAN,CAAe;AACXrB,oBAAAA,QAAQ,EAAG,IADA;AAEXY,oBAAAA,QAAQ,EAAGM,QAAQ,CAACP,IAAT,CAAcW,SAAd,CAAwBV,QAFxB;AAGXW,oBAAAA,KAAK,EAAGL,QAAQ,CAACP,IAAT,CAAcW,SAAd,CAAwBC,KAHrB;AAIXR,oBAAAA,MAAM,EAAGG,QAAQ,CAACP,IAAT,CAAcW,SAAd,CAAwBP;AAJtB,mBAAf;AAMP,iBAVK,EAYLS,KAZK,CAYC,UAAAC,KAAK,EAAI;AACZN,kBAAAA,OAAO,CAACC,GAAR,CAAYK,KAAZ;AACH,iBAdK,CAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAToB,GAAL;AAAA,CAArB","sourcesContent":["import createStore from 'unistore';\nimport axios from 'axios';\n\nconst initialState = {\n    pembeli_token:'',\n    pembeli_username:'',\n    pembeli_password:'',\n    pembeli_avatar:'',\n    is_login : false\n}\n\n\nexport const store = createStore(initialState)\n\nexport const actions = store => ({\n    setField:(state,e) => {\n        return {[e.target.name] : e.target.value};\n    },\n\n    postLogout: state =>{\n        return {is_login : false};\n    },\n    \n    postLogin : async state => {\n        const data = {username: state.pembeli_username, password: state.pembeli_password, token: state.pembeli_token, avatar:state.pembeli_avatar};\n        await axios\n        .post(\"https://api-todofancy.herokuapp.com/api/auth\")\n        .then(response => {\n            console.log(\"postLogin response\", response.data);\n                store.setState({\n                    is_login : true,\n                    username : response.data.user_data.username,\n                    email : response.data.user_data.email,\n                    avatar : response.data.user_data.avatar\n                });\n        })\n        \n        .catch(error => {\n            console.log(error);\n        })\n    }\n});"]},"metadata":{},"sourceType":"module"}